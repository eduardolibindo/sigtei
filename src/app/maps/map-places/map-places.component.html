<!-- <h1> {{texto}}</h1>

<agm-map [latitude]="lat" [zoom]="zoom" [longitude]="lng">
  <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
</agm-map> -->

<div class="container">

  <h1>{{texto}}</h1>

  <agm-map style="height:500px"
    [(latitude)]="location.lat"
    [(longitude)]="location.lng"
    [(zoom)]="location.zoom"
    [disableDefaultUI]="true"
    [zoomControl]="true"
    [(fitBounds)]='location.viewport'
    (mapClick)="mapClicked($event)">

    <agm-marker
      *ngFor="let m of markers; let i = index"
      (markerClick)="clickedMarker(m.label, i)"
      [(latitude)]="m.lat"
      [(longitude)]="m.lng"
      [label]="m.label"
      [markerDraggable]="m.draggable"
      (dragEnd)='markerDragEnd(m, $event)'>

      <agm-info-window>
        <strong>{{m.label}}</strong>
      </agm-info-window>
    </agm-marker>

    <!-- <agm-circle [latitude]="location.lat" [longitude]="location.lng" [(radius)]="circleRadius" [fillColor]="'blue'"
      [circleDraggable]="true" [editable]="true"></agm-circle> -->

  </agm-map>

  <div class="container-fluid">
    <div class='row'>
      <div class="form-group">
        <label class='col-sm-2'>Endereço</label>
        <input class='col-sm-10' type='text' [(ngModel)]='location.address_level_1' class="form-control"
          placeholder='Endereço'>
      </div>
      <div class="form-group">
        <label class='col-sm-2'>Cidade</label>
        <input class='col-sm-10' [(ngModel)]='location.address_level_2' class='form-control' placeholder='Cidade' />
      </div>

      <div class="form-group">
        <label class='col-sm-2'>Estado</label>
        <input class='col-sm-10' [(ngModel)]='location.address_state' class='form-control' placeholder='Estado'>
      </div>

      <div class="form-group">
        <label class='col-sm-2'>Pais</label>
        <input class='col-sm-10' [(ngModel)]='location.address_country' class='form-control' placeholder='Pais'>
      </div>

      <div class="form-group">
        <label class='col-sm-2'>Cep</label>
        <input class='col-sm-10' [(ngModel)]='location.address_zip' class='form-control' placeholder='Cep'>
      </div>
    </div>
    <button (click)='updateOnMap()' type="submit" class="btn mt-3 rounded-pill btn-lg btn-submit text-uppercase"
      style="margin-top: .25rem; margin-bottom: .25rem; margin: 0 10px;">Buscar</button>
  </div>

  <div class="container-fluid">
    <div class='row'>
      <div class="form-group">
        <label class='col-sm-2'>Raio do círculo em milhas</label>
        <input type='text' class='form-control' #miles [value]='circleRadiusInMiles() | number:"0.0-2"'
          (keyup)="milesToRadius(miles.value)" />
      </div>
    </div>
  </div>

</div>

<div class="login-form text-center">
  <button routerLink="/maps" class="btn mt-3 rounded-pill btn-lg btn-submit text-uppercase"
    style="margin-top: .25rem; margin-bottom: .25rem; margin: 0 10px;">Sair</button>
</div>
